clone_folder: c:\projects\swig-cmake

environment:
  matrix:
    - CMAKE_PLATFORM: Visual Studio 9 2008
    - CMAKE_PLATFORM: Visual Studio 14 2015

build_script:
  - dir /p C:\cygwin\bin
  - dir /p C:\mingw-w64\i686-6.3.0-posix-dwarf-rt_v5-rev1
  - cd c:\projects
  - appveyor DownloadFile https://github.com/swig/swig/archive/rel-3.0.12.tar.gz
  - 7z x rel-3.0.12.tar.gz
  - 7z x rel-3.0.12.tar
  - xcopy C:\projects\swig-cmake\* C:\projects\swig-rel-3.0.12 /s /e /y || exit 1
  - cd c:\projects\swig-rel-3.0.12
  - Tools\nuget-install.cmd pcre -Verbosity quiet -Version 8.33.0.1 -OutputDirectory C:\pcre
  - dir /p C:\pcre
  - cmake -LAH -G "%CMAKE_PLATFORM%" -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX="%CD:\=/%/install2" -DCMAKE_PREFIX_PATH=C:\pcre -DBISON_EXECUTABLE=C:/cygwin/bin/bison.exe .
  - cmake --build . --config Release --target install
  - C:\projects\swig-rel-3.0.12\install2\bin\swig.exe --help
  - C:\projects\swig-rel-3.0.12\install2\bin\swig.exe -pcreversion
